/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

"use strict";
eval("'use strict'; \r\nvar usrContent = angular.module('usrContent', ['summernote', 'AxelSoft']);\r\n\r\nusrContent.controller('ctrlEditProfile',\r\n    ['$scope', '$rootScope', '$filter', '$timeout', '$http', '$q', 'Usr', 'Countries', 'PersnlInfo', 'CntctDtls', 'ProfForms',\r\n    function($scope, $rootScope, $filter, $timeout, $http, $q, Usr, Countries, PersnlInfo, CntctDtls, ProfForms) {\r\n\r\n    $scope.proform = ProfForms.query();\r\n    $scope.frm1_loader = false;\r\n    $scope.frm2_loader = false;\r\n    ProfForms.query().$promise.then(function(data) {\r\n        $scope.proform = data;\r\n        var actvfrm = 0,\r\n            actvfrm2 = 0;\r\n        switch(data['personalinfo']){\r\n            case 0:\r\n                actvfrm = 1;\r\n                break;\r\n            case 1:\r\n                actvfrm = 0;\r\n                break;\r\n        }\r\n\r\n        switch(data['contactdetails']){\r\n            case 0:\r\n                actvfrm2 = 1;\r\n                break;\r\n            case 1:\r\n                actvfrm2 = 0;\r\n                break;\r\n        }\r\n        $timeout(function(){\r\n            if(!data['contactdetails']){\r\n                $scope.collapseTab(2);\r\n            }\r\n        }, 200);\r\n        $scope.forms = [\r\n            {'form':  'PersonalInfo', 'cardnum': 0, 'actvform': actvfrm},\r\n            {'form':  'ContactDetails', 'cardnum': 1, 'actvform': actvfrm2},\r\n        ];\r\n    });\r\n    \r\n    $scope.openForm = function(cardnum, card){\r\n        switch(card){\r\n            case 0:\r\n                $scope.forms[cardnum]['actvform'] = 0;\r\n                break;\r\n            case 1:\r\n                $scope.forms[cardnum]['actvform'] = 1;\r\n                break;\r\n        }\r\n        \r\n        // console.log(card);\r\n        if($scope.msg['success']){\r\n            $scope.msg['success'] = '';\r\n        }\r\n        var fadefrm = cardnum+1;\r\n        angular.element('.card:nth-child('+fadefrm+') .crdbdy').hide().delay(200).fadeIn();\r\n    }\r\n    $scope.updateUsr = function(){\r\n        Usr.query().$promise.then(function(data) {\r\n            $rootScope.usr = data;\r\n        });\r\n    }\r\n    $scope.msg = [];\r\n    $scope.countries = Countries.query();\r\n    $scope.frm1 = [];\r\n    $scope.frm2 = [];\r\n    PersnlInfo.query().$promise.then(function(data) {\r\n        $scope.frm1 = data;\r\n        $scope.cvlstatus = $scope.frm1.cstatus;\r\n        $scope.country = $scope.frm1.country;\r\n        $scope.nationality = $scope.frm1.nationality;\r\n    });\r\n    CntctDtls.query().$promise.then(function(data) {\r\n        $scope.frm2 = data;\r\n    });\r\n    $scope.select_status = {\r\n        onSelect: function (item) {\r\n            $scope.frm1.cstatus = item.id;\r\n        }\r\n    };\r\n    $scope.select_country = {\r\n        onSelect: function (item) {\r\n            $scope.frm1.country = item.id;\r\n        }\r\n    };\r\n    $scope.select_nationality = {\r\n        onSelect: function (item) {\r\n            $scope.frm1.nationality = item.id;\r\n        }\r\n    };\r\n    $scope.cstatus = [\r\n        {id: 1, name: 'Single'},\r\n        {id: 2, name: 'Married'},\r\n        {id: 3, name: 'Legally separated'},\r\n        {id: 4, name: 'Annulled'},\r\n        {id: 5, name: 'Widow'},\r\n        {id: 6, name: 'Widower'}\r\n    ];\r\n\r\n    $scope.imgForm = function(imgtarget){\r\n        $timeout(function(){\r\n            $scope.imgtarget = imgtarget;\r\n        }, 10);\r\n    }\r\n\r\n    $scope.img_coordinates = function(coordinates){\r\n        $scope.coordinates = coordinates;\r\n    }\r\n\r\n    $scope.cancelUpload = function(){\r\n        $scope.imgtarget = '';\r\n        angular.element('.upload').val('');\r\n        angular.element('#target').data('Jcrop').destroy();\r\n        angular.element('#target').attr('src', '');\r\n    }\r\n\r\n    $scope.uploadFile = function(files){\r\n        $http({\r\n            method: 'POST',\r\n            url: '/upload_dp',\r\n            headers: { 'Content-Type': undefined },\r\n            transformRequest: function (data) {\r\n                var fd = new FormData();\r\n\r\n                fd.append('coordinates', angular.toJson(data.coordinates));\r\n                angular.forEach(data.img_files, function(file){\r\n                   fd.append('file', file);\r\n                });\r\n                return fd;\r\n            },\r\n            data: {img_files: files, coordinates: $scope.coordinates}\r\n        }).then(function(result){\r\n            console.log(result.data);\r\n            \r\n            var msg = result.data;\r\n\r\n            if(!msg['dp']['success']){\r\n                $scope.msg = '';\r\n            }else{\r\n                $scope.msg = msg;\r\n                $scope.updateUsr();\r\n                $scope.timestamp();\r\n                $scope.cancelUpload();\r\n                angular.element('#cropModal').modal('hide');\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    $scope.deleteRecord = function(num){\r\n        $http({\r\n            method: 'POST',\r\n            url: '/delete_record',\r\n            headers: { 'Content-Type': undefined },\r\n            transformRequest: function (data) {\r\n                var fd = new FormData();\r\n\r\n                fd.append('num', angular.toJson(data.num));\r\n                return fd;\r\n            },\r\n            data: {num: num}\r\n        }).then(function(result){\r\n            var msg = result.data;\r\n            var msg_dtl = [];\r\n            if(msg['dpimg']){\r\n                msg_dtl = msg['dpimg']['dlt']['success'];\r\n            }\r\n            if(msg['rsm']){\r\n                msg_dtl = msg['rsm']['dlt']['success'];\r\n            }\r\n            if(!msg_dtl){\r\n                $scope.msg = '';\r\n            }else{\r\n                $scope.msg = msg;\r\n                $rootScope.usr = Usr.query();\r\n            }\r\n        });\r\n    }\r\n\r\n    $scope.clsbbl = function(num){\r\n        switch(num){\r\n            case 0:\r\n                $scope.dltdp = false;\r\n                break;\r\n            case 1:\r\n                $scope.dltrsm = false;\r\n                break;\r\n            case 2:\r\n                $scope.frm1cnfrm = false;\r\n                break;\r\n        }\r\n    }\r\n\r\n    angular.element('#edtprof_accrdn .card:nth-child(1) .collapse').collapse('show');\r\n    angular.element('#edtprof_accrdn .card .card-header').addClass('collapsed');\r\n    angular.element('#edtprof_accrdn .card:nth-child(1) .card-header').removeClass('collapsed');\r\n    angular.element('#edtprof_accrdn .card .collapse').collapse('hide');\r\n    var current_num = 1;\r\n\r\n    $scope.collapseTab = function(num){\r\n        if(!angular.element('#edtprof_accrdn .card:nth-child('+num+')').hasClass('disabled')){\r\n            angular.element('#edtprof_accrdn .card .collapse').collapse('hide');\r\n            angular.element('#edtprof_accrdn .card:nth-child('+num+') .collapse').collapse('show');\r\n            \r\n            if(current_num == num){\r\n                angular.element('#edtprof_accrdn .card:nth-child('+num+') .card-header').toggleClass('collapsed');\r\n            }else{\r\n                angular.element('#edtprof_accrdn .card .card-header').addClass('collapsed');\r\n                angular.element('#edtprof_accrdn .card:nth-child('+num+') .card-header').toggleClass('collapsed');\r\n            }\r\n            current_num = num;\r\n        }\r\n    }\r\n\r\n\r\n    $scope.summernote_options = {\r\n        toolbar: [\r\n                ['edit',['undo','redo']],\r\n                ['style', ['bold', 'italic', 'underline']],\r\n                ['alignment', ['ul', 'ol', 'paragraph', 'lineheight']]\r\n                \r\n            ]\r\n    };\r\n    $scope.makeSameAddress = function(check){\r\n        if(check == true){\r\n            $scope.frm2.prmnnt_addrss = angular.copy($scope.frm2.prsnt_addrss);\r\n        }\r\n    }\r\n\r\n    $scope.savePersonalInfo = function(frm1){\r\n        $scope.frm1_loader = true;\r\n        $http({\r\n            method: 'POST',\r\n            url: '/user/save_personal_info',\r\n            headers: { 'Content-Type': undefined },\r\n            transformRequest: function (data) {\r\n                var fd = new FormData();\r\n                fd.append('user', angular.toJson(data.user));\r\n                return fd;\r\n            },\r\n            data: {user: frm1}\r\n        }).then(function(result){\r\n            $scope.msg = result.data;\r\n            if(!$scope.msg['error']){\r\n                $scope.forms[0]['actvform'] = 0;\r\n            }\r\n            angular.element('.card:nth-child(1) .crdbdy').hide().delay(200).fadeIn();\r\n            $timeout(function(){\r\n                $scope.frm1_loader = false;\r\n                if($scope.msg['success']){\r\n                    if($scope.msg['success']['prsnl']['added']){\r\n                        $scope.collapseTab(2);\r\n                        $scope.proform['personalinfo'] = 1;\r\n                    }\r\n                }\r\n            }, 200);\r\n            console.log($scope.msg);\r\n        });\r\n    }\r\n\r\n    $scope.saveContactDetails = function(frm2){\r\n        // console.log(frm2);\r\n        $scope.frm2_loader = true;\r\n        $http({\r\n            method: 'POST',\r\n            url: '/user/save_contact_details',\r\n            headers: { 'Content-Type': undefined },\r\n            transformRequest: function (data) {\r\n                var fd = new FormData();\r\n                fd.append('user', angular.toJson(data.user));\r\n                return fd;\r\n            },\r\n            data: {user: frm2}\r\n        }).then(function(result){\r\n            $scope.msg = result.data;\r\n            if(!$scope.msg['error']){\r\n                $scope.forms[1]['actvform'] = 0;\r\n            }\r\n            angular.element('.card:nth-child(2) .crdbdy').hide().delay(200).fadeIn();\r\n            $timeout(function(){\r\n                $scope.frm2_loader = false;\r\n                if($scope.msg['success']){\r\n                    if($scope.msg['success']['cntctdtls']['added']){\r\n                        $scope.collapseTab(3);\r\n                        $scope.proform['contactdetails'] = 1;\r\n                    }\r\n                }\r\n            }, 200);\r\n            console.log($scope.msg);\r\n        });\r\n    }\r\n    \r\n    $scope.getAge = function(bday){\r\n        var current_date    = new Date();\r\n\r\n        var current_yr      = current_date.getFullYear();\r\n        var current_mo      = current_date.getMonth();\r\n\r\n        var bdate           = new Date(bday);\r\n        if ( Object.prototype.toString.call(bdate) === \"[object Date]\" ) {\r\n\r\n            if (!isNaN(bdate.getTime())){\r\n                var bdate_yr        = bdate.getFullYear();\r\n                var bdate_mo        = bdate.getMonth();\r\n                var your_yr         = current_yr - bdate_yr;\r\n                var your_mo         = current_mo - bdate_mo;\r\n                if(your_mo < 0 || (your_mo === 0 && current_date.getDate() < bdate.getDate())){\r\n                    your_yr--;\r\n                }\r\n\r\n                $scope.frm1.age = your_yr;\r\n                // console.log($scope.frm1.age);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    $scope.gender = [\r\n        {id: 1, name: 'Female'},\r\n        {id: 2, name: 'Male'}\r\n    ];\r\n\r\n    var fltr = '';\r\n    $scope.getfltrvalue = function(arr, arr_id, idntfr){\r\n        if($filter('filter')(arr, {id: arr_id})[0]){\r\n            switch(idntfr){\r\n                case 0:\r\n                    fltr = $filter('filter')(arr, {id: arr_id})[0].name;\r\n                    break;\r\n                case 1:\r\n                    fltr = $filter('filter')(arr, {id: arr_id})[0].country;\r\n                    break;\r\n                case 2:\r\n                    fltr = $filter('filter')(arr, {id: arr_id})[0].nationality;\r\n                    break;\r\n            }\r\n            return fltr;\r\n        }\r\n    }\r\n}]);\r\n\r\nusrContent.directive('fileInput', ['$parse', '$http', '$timeout',\r\n    function($parse, $http, $timeout){\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, elm, attrs){\r\n            elm.bind('change', function(){\r\n                \r\n                var files = elm[0].files;\r\n                $parse(attrs.fileInput).assign(scope, files);\r\n                scope.$apply();\r\n                \r\n                scope.shw_avatarmdl = true;\r\n                scope.loader = true;\r\n\r\n                $http({\r\n                    method: 'POST',\r\n                    url: \"/validate_dp\",\r\n                    headers: { 'Content-Type': undefined },\r\n                    transformRequest: function (data) {\r\n                        var fd = new FormData();\r\n                        angular.forEach(data.img_files, function(file){\r\n                           fd.append('file', file);\r\n                        });\r\n                        return fd;\r\n                    },\r\n                    data: {img_files: files}\r\n                }).then(function(result){\r\n                    var msg = result.data;\r\n                    scope.shw_avatarmdl = false;\r\n                    \r\n                    if(!msg['dp']['error']['file']){\r\n                        angular.element('#cropModal').appendTo('body').modal({\r\n                            backdrop: 'static'\r\n                        });\r\n                        var file = files[0];\r\n                        (function(file) {\r\n                            var reader = new FileReader();\r\n                            reader.readAsDataURL(file);\r\n                            reader.onload = function(e) {\r\n                                var imgTarget = e.target.result;\r\n                                scope.imgForm(imgTarget);\r\n                            }\r\n                        }(file));\r\n                        scope.msg = '';\r\n                    }else{\r\n                        scope.msg = msg;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n}]);\r\n\r\nusrContent.directive('fileResume', ['$parse', '$http', '$timeout',\r\n    function($parse, $http, $timeout){\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, elm, attrs){\r\n            elm.bind('change', function(){\r\n                var files = elm[0].files;\r\n                $parse(attrs.fileResume).assign(scope, files);\r\n                scope.$apply();\r\n                \r\n                scope.resume_loader = true;\r\n\r\n                $http({\r\n                    method: 'POST',\r\n                    url: \"/upload_resume\",\r\n                    headers: { 'Content-Type': undefined },\r\n                    transformRequest: function (data) {\r\n                        var fd = new FormData();\r\n                        angular.forEach(data.resumefiles, function(file){\r\n                           fd.append('file', file);\r\n                        });\r\n                        return fd;\r\n                    },\r\n                    data: {resumefiles: files}\r\n                }).then(function(result){\r\n                    var msg = result.data;\r\n                    console.log(msg);\r\n                    $timeout(function(){\r\n                        scope.resume_loader = false;\r\n                        scope.updateUsr();\r\n                        if(!msg['resume']){\r\n                            scope.msg = '';\r\n                        }else{\r\n                            scope.msg = msg;\r\n                        }\r\n                        angular.element('.preview_resume .upload').val('');\r\n                        \r\n                    }, 500);\r\n                });\r\n            });\r\n        }\r\n    }\r\n}]);\r\n\r\n\r\nusrContent.directive('jpCustomCrop', ['$parse', '$rootScope', '$timeout', function($parse, $rootScope, $timeout){\r\n    return {\r\n        restrict: 'A',\r\n        link: function (scope, element, attrs)\r\n        {\r\n            $(function(){\r\n                $('#cropModal').on('shown.bs.modal', function () {\r\n                    \r\n                    $timeout(function(){\r\n                        scope.loader = false;\r\n                        $('.imgcropper, .prvw').hide().delay('200').fadeIn();\r\n                    }, 1000)\r\n                  var jcrop_api,\r\n                  boundx,\r\n                  boundy,\r\n\r\n                  // Grab some information about the preview pane\r\n                  $preview = $('.preview-pane'),\r\n                  $pcnt = $('.preview-pane .preview-container'),\r\n                  $pimg = $('.preview-pane .preview-container img'),\r\n                  xsize = $pcnt.width(),\r\n                  ysize = $pcnt.height();\r\n                  \r\n                  $('#target').Jcrop({\r\n                    boxWidth: 670,\r\n                    // boxHeight: 550,\r\n                    minSize: [ 100, 100 ],\r\n                    // maxSize: [ 450, 450 ],\r\n                    onChange: updatePreview,\r\n                    onSelect: updatePreview,\r\n                    aspectRatio: xsize / ysize\r\n                  },function(){\r\n                    // Use the API to get the real image size\r\n                    var bounds = this.getBounds();\r\n                    boundx = bounds[0];\r\n                    boundy = bounds[1];\r\n                    \r\n                    // Store the API in the jcrop_api variable\r\n                    jcrop_api = this;\r\n                    jcrop_api.animateTo([510, 300, 190, 100]);\r\n                  });\r\n\r\n                    function updatePreview(c){\r\n                        var imgx = Math.round(c.x);\r\n                        var imgy = Math.round(c.y);\r\n                        var imgw = Math.round(c.w);\r\n                        var imgh = Math.round(c.h);\r\n                        var imgw2 = xsize;\r\n                        var imgh2 = ysize;\r\n                        scope.img_coordinates({imgx: imgx, imgy: imgy, imgw: imgw, imgh: imgh, imgw2: imgw2, imgh2: imgh2});\r\n                        if (parseInt(c.w) > 0){\r\n                          var rx = xsize / c.w;\r\n                          var ry = ysize / c.h;\r\n                          $pimg.css({\r\n                            width: Math.round(rx * boundx) + 'px',\r\n                            height: Math.round(ry * boundy) + 'px',\r\n                            marginLeft: '-' + Math.round(rx * c.x) + 'px',\r\n                            marginTop: '-' + Math.round(ry * c.y) + 'px'\r\n                          });\r\n                        }\r\n                    };\r\n                })\r\n            });\r\n        }\r\n    };\r\n}]);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL2FwcC91c2VyL2VkaXRfcHJvZmlsZS5qcz8wYzNkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JzsgXHJcbnZhciB1c3JDb250ZW50ID0gYW5ndWxhci5tb2R1bGUoJ3VzckNvbnRlbnQnLCBbJ3N1bW1lcm5vdGUnLCAnQXhlbFNvZnQnXSk7XHJcblxyXG51c3JDb250ZW50LmNvbnRyb2xsZXIoJ2N0cmxFZGl0UHJvZmlsZScsXHJcbiAgICBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRmaWx0ZXInLCAnJHRpbWVvdXQnLCAnJGh0dHAnLCAnJHEnLCAnVXNyJywgJ0NvdW50cmllcycsICdQZXJzbmxJbmZvJywgJ0NudGN0RHRscycsICdQcm9mRm9ybXMnLFxyXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkZmlsdGVyLCAkdGltZW91dCwgJGh0dHAsICRxLCBVc3IsIENvdW50cmllcywgUGVyc25sSW5mbywgQ250Y3REdGxzLCBQcm9mRm9ybXMpIHtcclxuXHJcbiAgICAkc2NvcGUucHJvZm9ybSA9IFByb2ZGb3Jtcy5xdWVyeSgpO1xyXG4gICAgJHNjb3BlLmZybTFfbG9hZGVyID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZnJtMl9sb2FkZXIgPSBmYWxzZTtcclxuICAgIFByb2ZGb3Jtcy5xdWVyeSgpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5wcm9mb3JtID0gZGF0YTtcclxuICAgICAgICB2YXIgYWN0dmZybSA9IDAsXHJcbiAgICAgICAgICAgIGFjdHZmcm0yID0gMDtcclxuICAgICAgICBzd2l0Y2goZGF0YVsncGVyc29uYWxpbmZvJ10pe1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBhY3R2ZnJtID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBhY3R2ZnJtID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoKGRhdGFbJ2NvbnRhY3RkZXRhaWxzJ10pe1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBhY3R2ZnJtMiA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgYWN0dmZybTIgPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKCFkYXRhWydjb250YWN0ZGV0YWlscyddKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb2xsYXBzZVRhYigyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgJHNjb3BlLmZvcm1zID0gW1xyXG4gICAgICAgICAgICB7J2Zvcm0nOiAgJ1BlcnNvbmFsSW5mbycsICdjYXJkbnVtJzogMCwgJ2FjdHZmb3JtJzogYWN0dmZybX0sXHJcbiAgICAgICAgICAgIHsnZm9ybSc6ICAnQ29udGFjdERldGFpbHMnLCAnY2FyZG51bSc6IDEsICdhY3R2Zm9ybSc6IGFjdHZmcm0yfSxcclxuICAgICAgICBdO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICRzY29wZS5vcGVuRm9ybSA9IGZ1bmN0aW9uKGNhcmRudW0sIGNhcmQpe1xyXG4gICAgICAgIHN3aXRjaChjYXJkKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1zW2NhcmRudW1dWydhY3R2Zm9ybSddID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybXNbY2FyZG51bV1bJ2FjdHZmb3JtJ10gPSAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNhcmQpO1xyXG4gICAgICAgIGlmKCRzY29wZS5tc2dbJ3N1Y2Nlc3MnXSl7XHJcbiAgICAgICAgICAgICRzY29wZS5tc2dbJ3N1Y2Nlc3MnXSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmFkZWZybSA9IGNhcmRudW0rMTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5jYXJkOm50aC1jaGlsZCgnK2ZhZGVmcm0rJykgLmNyZGJkeScpLmhpZGUoKS5kZWxheSgyMDApLmZhZGVJbigpO1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLnVwZGF0ZVVzciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgVXNyLnF1ZXJ5KCkuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUudXNyID0gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgICRzY29wZS5tc2cgPSBbXTtcclxuICAgICRzY29wZS5jb3VudHJpZXMgPSBDb3VudHJpZXMucXVlcnkoKTtcclxuICAgICRzY29wZS5mcm0xID0gW107XHJcbiAgICAkc2NvcGUuZnJtMiA9IFtdO1xyXG4gICAgUGVyc25sSW5mby5xdWVyeSgpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5mcm0xID0gZGF0YTtcclxuICAgICAgICAkc2NvcGUuY3Zsc3RhdHVzID0gJHNjb3BlLmZybTEuY3N0YXR1cztcclxuICAgICAgICAkc2NvcGUuY291bnRyeSA9ICRzY29wZS5mcm0xLmNvdW50cnk7XHJcbiAgICAgICAgJHNjb3BlLm5hdGlvbmFsaXR5ID0gJHNjb3BlLmZybTEubmF0aW9uYWxpdHk7XHJcbiAgICB9KTtcclxuICAgIENudGN0RHRscy5xdWVyeSgpLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5mcm0yID0gZGF0YTtcclxuICAgIH0pO1xyXG4gICAgJHNjb3BlLnNlbGVjdF9zdGF0dXMgPSB7XHJcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mcm0xLmNzdGF0dXMgPSBpdGVtLmlkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAkc2NvcGUuc2VsZWN0X2NvdW50cnkgPSB7XHJcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mcm0xLmNvdW50cnkgPSBpdGVtLmlkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAkc2NvcGUuc2VsZWN0X25hdGlvbmFsaXR5ID0ge1xyXG4gICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZnJtMS5uYXRpb25hbGl0eSA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgICRzY29wZS5jc3RhdHVzID0gW1xyXG4gICAgICAgIHtpZDogMSwgbmFtZTogJ1NpbmdsZSd9LFxyXG4gICAgICAgIHtpZDogMiwgbmFtZTogJ01hcnJpZWQnfSxcclxuICAgICAgICB7aWQ6IDMsIG5hbWU6ICdMZWdhbGx5IHNlcGFyYXRlZCd9LFxyXG4gICAgICAgIHtpZDogNCwgbmFtZTogJ0FubnVsbGVkJ30sXHJcbiAgICAgICAge2lkOiA1LCBuYW1lOiAnV2lkb3cnfSxcclxuICAgICAgICB7aWQ6IDYsIG5hbWU6ICdXaWRvd2VyJ31cclxuICAgIF07XHJcblxyXG4gICAgJHNjb3BlLmltZ0Zvcm0gPSBmdW5jdGlvbihpbWd0YXJnZXQpe1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pbWd0YXJnZXQgPSBpbWd0YXJnZXQ7XHJcbiAgICAgICAgfSwgMTApO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5pbWdfY29vcmRpbmF0ZXMgPSBmdW5jdGlvbihjb29yZGluYXRlcyl7XHJcbiAgICAgICAgJHNjb3BlLmNvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmNhbmNlbFVwbG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLmltZ3RhcmdldCA9ICcnO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnVwbG9hZCcpLnZhbCgnJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjdGFyZ2V0JykuZGF0YSgnSmNyb3AnKS5kZXN0cm95KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjdGFyZ2V0JykuYXR0cignc3JjJywgJycpO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS51cGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZXMpe1xyXG4gICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJy91cGxvYWRfZHAnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcclxuICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZkLmFwcGVuZCgnY29vcmRpbmF0ZXMnLCBhbmd1bGFyLnRvSnNvbihkYXRhLmNvb3JkaW5hdGVzKSk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZGF0YS5pbWdfZmlsZXMsIGZ1bmN0aW9uKGZpbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YToge2ltZ19maWxlczogZmlsZXMsIGNvb3JkaW5hdGVzOiAkc2NvcGUuY29vcmRpbmF0ZXN9XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbXNnID0gcmVzdWx0LmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZighbXNnWydkcCddWydzdWNjZXNzJ10pe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1zZyA9ICcnO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tc2cgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlVXNyKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGltZXN0YW1wKCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsVXBsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNjcm9wTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgICRzY29wZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbihudW0pe1xyXG4gICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJy9kZWxldGVfcmVjb3JkJyxcclxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ251bScsIGFuZ3VsYXIudG9Kc29uKGRhdGEubnVtKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGE6IHtudW06IG51bX1cclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIHZhciBtc2cgPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgdmFyIG1zZ19kdGwgPSBbXTtcclxuICAgICAgICAgICAgaWYobXNnWydkcGltZyddKXtcclxuICAgICAgICAgICAgICAgIG1zZ19kdGwgPSBtc2dbJ2RwaW1nJ11bJ2RsdCddWydzdWNjZXNzJ107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYobXNnWydyc20nXSl7XHJcbiAgICAgICAgICAgICAgICBtc2dfZHRsID0gbXNnWydyc20nXVsnZGx0J11bJ3N1Y2Nlc3MnXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighbXNnX2R0bCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubXNnID0gJyc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1zZyA9IG1zZztcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNyID0gVXNyLnF1ZXJ5KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuY2xzYmJsID0gZnVuY3Rpb24obnVtKXtcclxuICAgICAgICBzd2l0Y2gobnVtKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRsdGRwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRsdHJzbSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICRzY29wZS5mcm0xY25mcm0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNlZHRwcm9mX2FjY3JkbiAuY2FyZDpudGgtY2hpbGQoMSkgLmNvbGxhcHNlJykuY29sbGFwc2UoJ3Nob3cnKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2VkdHByb2ZfYWNjcmRuIC5jYXJkIC5jYXJkLWhlYWRlcicpLmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2VkdHByb2ZfYWNjcmRuIC5jYXJkOm50aC1jaGlsZCgxKSAuY2FyZC1oZWFkZXInKS5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNlZHRwcm9mX2FjY3JkbiAuY2FyZCAuY29sbGFwc2UnKS5jb2xsYXBzZSgnaGlkZScpO1xyXG4gICAgdmFyIGN1cnJlbnRfbnVtID0gMTtcclxuXHJcbiAgICAkc2NvcGUuY29sbGFwc2VUYWIgPSBmdW5jdGlvbihudW0pe1xyXG4gICAgICAgIGlmKCFhbmd1bGFyLmVsZW1lbnQoJyNlZHRwcm9mX2FjY3JkbiAuY2FyZDpudGgtY2hpbGQoJytudW0rJyknKS5oYXNDbGFzcygnZGlzYWJsZWQnKSl7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2VkdHByb2ZfYWNjcmRuIC5jYXJkIC5jb2xsYXBzZScpLmNvbGxhcHNlKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2VkdHByb2ZfYWNjcmRuIC5jYXJkOm50aC1jaGlsZCgnK251bSsnKSAuY29sbGFwc2UnKS5jb2xsYXBzZSgnc2hvdycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoY3VycmVudF9udW0gPT0gbnVtKXtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2VkdHByb2ZfYWNjcmRuIC5jYXJkOm50aC1jaGlsZCgnK251bSsnKSAuY2FyZC1oZWFkZXInKS50b2dnbGVDbGFzcygnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZWR0cHJvZl9hY2NyZG4gLmNhcmQgLmNhcmQtaGVhZGVyJykuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZWR0cHJvZl9hY2NyZG4gLmNhcmQ6bnRoLWNoaWxkKCcrbnVtKycpIC5jYXJkLWhlYWRlcicpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50X251bSA9IG51bTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgICRzY29wZS5zdW1tZXJub3RlX29wdGlvbnMgPSB7XHJcbiAgICAgICAgdG9vbGJhcjogW1xyXG4gICAgICAgICAgICAgICAgWydlZGl0JyxbJ3VuZG8nLCdyZWRvJ11dLFxyXG4gICAgICAgICAgICAgICAgWydzdHlsZScsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJ11dLFxyXG4gICAgICAgICAgICAgICAgWydhbGlnbm1lbnQnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCcsICdsaW5laGVpZ2h0J11dXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgXVxyXG4gICAgfTtcclxuICAgICRzY29wZS5tYWtlU2FtZUFkZHJlc3MgPSBmdW5jdGlvbihjaGVjayl7XHJcbiAgICAgICAgaWYoY2hlY2sgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICRzY29wZS5mcm0yLnBybW5udF9hZGRyc3MgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmZybTIucHJzbnRfYWRkcnNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLnNhdmVQZXJzb25hbEluZm8gPSBmdW5jdGlvbihmcm0xKXtcclxuICAgICAgICAkc2NvcGUuZnJtMV9sb2FkZXIgPSB0cnVlO1xyXG4gICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJy91c2VyL3NhdmVfcGVyc29uYWxfaW5mbycsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ3VzZXInLCBhbmd1bGFyLnRvSnNvbihkYXRhLnVzZXIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmZDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YToge3VzZXI6IGZybTF9XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAkc2NvcGUubXNnID0gcmVzdWx0LmRhdGE7XHJcbiAgICAgICAgICAgIGlmKCEkc2NvcGUubXNnWydlcnJvciddKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mb3Jtc1swXVsnYWN0dmZvcm0nXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuY2FyZDpudGgtY2hpbGQoMSkgLmNyZGJkeScpLmhpZGUoKS5kZWxheSgyMDApLmZhZGVJbigpO1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZybTFfbG9hZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUubXNnWydzdWNjZXNzJ10pe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5tc2dbJ3N1Y2Nlc3MnXVsncHJzbmwnXVsnYWRkZWQnXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb2xsYXBzZVRhYigyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2Zvcm1bJ3BlcnNvbmFsaW5mbyddID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5tc2cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5zYXZlQ29udGFjdERldGFpbHMgPSBmdW5jdGlvbihmcm0yKXtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhmcm0yKTtcclxuICAgICAgICAkc2NvcGUuZnJtMl9sb2FkZXIgPSB0cnVlO1xyXG4gICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIHVybDogJy91c2VyL3NhdmVfY29udGFjdF9kZXRhaWxzJyxcclxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICAgICAgICAgIGZkLmFwcGVuZCgndXNlcicsIGFuZ3VsYXIudG9Kc29uKGRhdGEudXNlcikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhOiB7dXNlcjogZnJtMn1cclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5tc2cgPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgaWYoISRzY29wZS5tc2dbJ2Vycm9yJ10pe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1zWzFdWydhY3R2Zm9ybSddID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5jYXJkOm50aC1jaGlsZCgyKSAuY3JkYmR5JykuaGlkZSgpLmRlbGF5KDIwMCkuZmFkZUluKCk7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZnJtMl9sb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5tc2dbJ3N1Y2Nlc3MnXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLm1zZ1snc3VjY2VzcyddWydjbnRjdGR0bHMnXVsnYWRkZWQnXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb2xsYXBzZVRhYigzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2Zvcm1bJ2NvbnRhY3RkZXRhaWxzJ10gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm1zZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5nZXRBZ2UgPSBmdW5jdGlvbihiZGF5KXtcclxuICAgICAgICB2YXIgY3VycmVudF9kYXRlICAgID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnRfeXIgICAgICA9IGN1cnJlbnRfZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBjdXJyZW50X21vICAgICAgPSBjdXJyZW50X2RhdGUuZ2V0TW9udGgoKTtcclxuXHJcbiAgICAgICAgdmFyIGJkYXRlICAgICAgICAgICA9IG5ldyBEYXRlKGJkYXkpO1xyXG4gICAgICAgIGlmICggT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJkYXRlKSA9PT0gXCJbb2JqZWN0IERhdGVdXCIgKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGJkYXRlLmdldFRpbWUoKSkpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGJkYXRlX3lyICAgICAgICA9IGJkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmRhdGVfbW8gICAgICAgID0gYmRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciB5b3VyX3lyICAgICAgICAgPSBjdXJyZW50X3lyIC0gYmRhdGVfeXI7XHJcbiAgICAgICAgICAgICAgICB2YXIgeW91cl9tbyAgICAgICAgID0gY3VycmVudF9tbyAtIGJkYXRlX21vO1xyXG4gICAgICAgICAgICAgICAgaWYoeW91cl9tbyA8IDAgfHwgKHlvdXJfbW8gPT09IDAgJiYgY3VycmVudF9kYXRlLmdldERhdGUoKSA8IGJkYXRlLmdldERhdGUoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHlvdXJfeXItLTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZnJtMS5hZ2UgPSB5b3VyX3lyO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLmZybTEuYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmdlbmRlciA9IFtcclxuICAgICAgICB7aWQ6IDEsIG5hbWU6ICdGZW1hbGUnfSxcclxuICAgICAgICB7aWQ6IDIsIG5hbWU6ICdNYWxlJ31cclxuICAgIF07XHJcblxyXG4gICAgdmFyIGZsdHIgPSAnJztcclxuICAgICRzY29wZS5nZXRmbHRydmFsdWUgPSBmdW5jdGlvbihhcnIsIGFycl9pZCwgaWRudGZyKXtcclxuICAgICAgICBpZigkZmlsdGVyKCdmaWx0ZXInKShhcnIsIHtpZDogYXJyX2lkfSlbMF0pe1xyXG4gICAgICAgICAgICBzd2l0Y2goaWRudGZyKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBmbHRyID0gJGZpbHRlcignZmlsdGVyJykoYXJyLCB7aWQ6IGFycl9pZH0pWzBdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZmx0ciA9ICRmaWx0ZXIoJ2ZpbHRlcicpKGFyciwge2lkOiBhcnJfaWR9KVswXS5jb3VudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsdHIgPSAkZmlsdGVyKCdmaWx0ZXInKShhcnIsIHtpZDogYXJyX2lkfSlbMF0ubmF0aW9uYWxpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZsdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XSk7XHJcblxyXG51c3JDb250ZW50LmRpcmVjdGl2ZSgnZmlsZUlucHV0JywgWyckcGFyc2UnLCAnJGh0dHAnLCAnJHRpbWVvdXQnLFxyXG4gICAgZnVuY3Rpb24oJHBhcnNlLCAkaHR0cCwgJHRpbWVvdXQpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHJzKXtcclxuICAgICAgICAgICAgZWxtLmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IGVsbVswXS5maWxlcztcclxuICAgICAgICAgICAgICAgICRwYXJzZShhdHRycy5maWxlSW5wdXQpLmFzc2lnbihzY29wZSwgZmlsZXMpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNjb3BlLnNod19hdmF0YXJtZGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUubG9hZGVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi92YWxpZGF0ZV9kcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZGF0YS5pbWdfZmlsZXMsIGZ1bmN0aW9uKGZpbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmZC5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtpbWdfZmlsZXM6IGZpbGVzfVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5zaHdfYXZhdGFybWRsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIW1zZ1snZHAnXVsnZXJyb3InXVsnZmlsZSddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjY3JvcE1vZGFsJykuYXBwZW5kVG8oJ2JvZHknKS5tb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYydcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nVGFyZ2V0ID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmltZ0Zvcm0oaW1nVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfShmaWxlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLm1zZyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5tc2cgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufV0pO1xyXG5cclxudXNyQ29udGVudC5kaXJlY3RpdmUoJ2ZpbGVSZXN1bWUnLCBbJyRwYXJzZScsICckaHR0cCcsICckdGltZW91dCcsXHJcbiAgICBmdW5jdGlvbigkcGFyc2UsICRodHRwLCAkdGltZW91dCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0cnMpe1xyXG4gICAgICAgICAgICBlbG0uYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IGVsbVswXS5maWxlcztcclxuICAgICAgICAgICAgICAgICRwYXJzZShhdHRycy5maWxlUmVzdW1lKS5hc3NpZ24oc2NvcGUsIGZpbGVzKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzY29wZS5yZXN1bWVfbG9hZGVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi91cGxvYWRfcmVzdW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChkYXRhLnJlc3VtZWZpbGVzLCBmdW5jdGlvbihmaWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7cmVzdW1lZmlsZXM6IGZpbGVzfVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnJlc3VtZV9sb2FkZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUudXBkYXRlVXNyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFtc2dbJ3Jlc3VtZSddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLm1zZyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLm1zZyA9IG1zZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5wcmV2aWV3X3Jlc3VtZSAudXBsb2FkJykudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1dKTtcclxuXHJcblxyXG51c3JDb250ZW50LmRpcmVjdGl2ZSgnanBDdXN0b21Dcm9wJywgWyckcGFyc2UnLCAnJHJvb3RTY29wZScsICckdGltZW91dCcsIGZ1bmN0aW9uKCRwYXJzZSwgJHJvb3RTY29wZSwgJHRpbWVvdXQpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcjY3JvcE1vZGFsJykub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmxvYWRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaW1nY3JvcHBlciwgLnBydncnKS5oaWRlKCkuZGVsYXkoJzIwMCcpLmZhZGVJbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApXHJcbiAgICAgICAgICAgICAgICAgIHZhciBqY3JvcF9hcGksXHJcbiAgICAgICAgICAgICAgICAgIGJvdW5keCxcclxuICAgICAgICAgICAgICAgICAgYm91bmR5LFxyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gR3JhYiBzb21lIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcmV2aWV3IHBhbmVcclxuICAgICAgICAgICAgICAgICAgJHByZXZpZXcgPSAkKCcucHJldmlldy1wYW5lJyksXHJcbiAgICAgICAgICAgICAgICAgICRwY250ID0gJCgnLnByZXZpZXctcGFuZSAucHJldmlldy1jb250YWluZXInKSxcclxuICAgICAgICAgICAgICAgICAgJHBpbWcgPSAkKCcucHJldmlldy1wYW5lIC5wcmV2aWV3LWNvbnRhaW5lciBpbWcnKSxcclxuICAgICAgICAgICAgICAgICAgeHNpemUgPSAkcGNudC53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICB5c2l6ZSA9ICRwY250LmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgJCgnI3RhcmdldCcpLkpjcm9wKHtcclxuICAgICAgICAgICAgICAgICAgICBib3hXaWR0aDogNjcwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJveEhlaWdodDogNTUwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pblNpemU6IFsgMTAwLCAxMDAgXSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBtYXhTaXplOiBbIDQ1MCwgNDUwIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHVwZGF0ZVByZXZpZXcsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q6IHVwZGF0ZVByZXZpZXcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IHhzaXplIC8geXNpemVcclxuICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgQVBJIHRvIGdldCB0aGUgcmVhbCBpbWFnZSBzaXplXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmR4ID0gYm91bmRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5keSA9IGJvdW5kc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgQVBJIGluIHRoZSBqY3JvcF9hcGkgdmFyaWFibGVcclxuICAgICAgICAgICAgICAgICAgICBqY3JvcF9hcGkgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGpjcm9wX2FwaS5hbmltYXRlVG8oWzUxMCwgMzAwLCAxOTAsIDEwMF0pO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldyhjKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ3ggPSBNYXRoLnJvdW5kKGMueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWd5ID0gTWF0aC5yb3VuZChjLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1ndyA9IE1hdGgucm91bmQoYy53KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ2ggPSBNYXRoLnJvdW5kKGMuaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWd3MiA9IHhzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1naDIgPSB5c2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuaW1nX2Nvb3JkaW5hdGVzKHtpbWd4LCBpbWd5LCBpbWd3LCBpbWdoLCBpbWd3MiwgaW1naDJ9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGMudykgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnggPSB4c2l6ZSAvIGMudztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnkgPSB5c2l6ZSAvIGMuaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAkcGltZy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IE1hdGgucm91bmQocnggKiBib3VuZHgpICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChyeSAqIGJvdW5keSkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJy0nICsgTWF0aC5yb3VuZChyeCAqIGMueCkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnLScgKyBNYXRoLnJvdW5kKHJ5ICogYy55KSArICdweCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvYXBwL3VzZXIvZWRpdF9wcm9maWxlLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }
/******/ ]);